<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<body>
	<h:form>
			
<!-- 			Esse value faz com que o perfil selecionado seja adicionado nesta propriedade. -->
			<h:selectOneMenu value="#{usuCtrl.usuario.perfil}" converter="#{perfilConverter}">
				Perfil: 
<!-- 					Somente coloca um item default no inicio da caixa -->
				<f:selectItem itemValue="" itemLabel="Selectione"></f:selectItem>
<!-- 				Carga de dados, lembrando que nós usamos o post constuctor -->
				<f:selectItems value="#{perfilCtrl.perfilList}" var="p" itemLabel="#{p.descricao}"></f:selectItems>
				
			</h:selectOneMenu>
			
			Nome:
			<h:inputText value="#{usuCtrl.usuario.nome}"></h:inputText>
			Login
			<h:inputText value="#{usuCtrl.usuario.login}"></h:inputText>
			Senha:
			<h:inputText value="#{usuCtrl.usuario.senha}"></h:inputText>
			E-Mail:
			<h:inputText value="#{usuCtrl.usuario.email}">
				<f:validator validatorId="emailValidator"></f:validator>
			</h:inputText>

		<h:commandButton value="Salvar" actionListener="#{usuCtrl.salvar}"></h:commandButton>

	</h:form>

<br/><br/>

	<h:form>
		<h:messages></h:messages>
		<h:dataTable value="#{usuCtrl.usuarioList}" var="usu" border="1">
			
			<br/><br/>
			<f:facet name="header">
				Lista de Usuarios
			</f:facet>

			<h:column>
			<f:facet name="header">ID</f:facet>
				#{usu.id}
			</h:column>

			<h:column>
			<f:facet name="header">Perfil</f:facet>
				#{usu.perfil.descricao}
			</h:column>

			<h:column>
			<f:facet name="header">Nome</f:facet>
				#{usu.nome}
			</h:column>
			
			<h:column>
			<f:facet name="header">Login</f:facet>
				#{usu.login}
			</h:column>
			
			<h:column>
			<f:facet name="header">Email</f:facet>
				#{usu.email}
			</h:column>
			
			<h:column>
			<f:facet name="header">Ações</f:facet>
				|
				<h:commandButton value="Excluir" actionListener="#{usuCtrl.excluir(usu)}"></h:commandButton>
				|     
				<h:commandButton value="Editar" actionListener="#{usuCtrl.editar(usu)}"></h:commandButton>
				|
			</h:column>

		</h:dataTable>
	</h:form>


</body>
</html>

<!-- xmlns:mj="http://mojarra.dev.java.net/mojarra_ext" -->